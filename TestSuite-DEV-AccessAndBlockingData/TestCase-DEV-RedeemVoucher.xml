<?xml version="1.0" encoding="UTF-8"?>
<con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase-DEV-RedeemVoucher" searchProperties="true" id="d238c5ee-395d-4172-9544-40778cd184be" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests positiv test-case for redeem package voucher

test base is documentation:
svn://svn.sg.de.pri.o2.com/DealerPortal/DirectRecharge/trunk/SRs/SD34/ST_TD_SD34_DRC_ASAD_Oleg.doc

EDR validation data for test-cases:
For validation of EDR-Files in data base values from operation system are used like in examples below.

PACK_COMMIT_SUCCESSFUL(1, "951100")
---------------------------------------
20160222163114,1200051661,,VoucherRecharge,,4917675543496,951100,o2,,,919121648825,608912-0005-1661,01|P0SurfWoc,EUR,0,1,0,,DRC,1200051661,,,,,,

MONETARY_COMMIT_FAILED(3, "951122");
---------------------------------------
20160106220000,4100016785,,VoucherRecharge,,4917628086392,951122,o2,,,453791292777,613941-0001-6785,01 ,EUR,2000,2,0,,DRC,4100016785,,,,,,


PACK_COMMIT_FAILED(2, "951122");
---------------------------------------
20120608131425,2000006952,,VoucherRecharge,,4917689503506,951122,o2,,,448515024890,560620-0000-6952,01|P25EinetpaL,EUR,,1,0,,DRC,2000006952,,,,,,</con:description>
  <con:settings>
    <con:setting id="FlowLayout">true</con:setting>
    <con:setting id="dbb9c3df-4e9e-4979-936c-5bc715b11b6dfileName">GoodCase-DEV-redeemVoucher-Package</con:setting>
    <con:setting id="com.smartbear.ready.history.view.ClientResultsView$OptionsForm@errors_only">true</con:setting>
    <con:setting id="d238c5ee-395d-4172-9544-40778cd184befileName">TestCase-DEV-RedeemVoucher</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datasource" name="DataSource-MSISDNs" id="0c91bf9c-70fa-480f-a201-7186d95619aa">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="Grid">
        <con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">${#TestSuite#MSISDN-1}&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">${#TestSuite#MSISDN-2}&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">${#TestSuite#MSISDN-Voucher}&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><recognizeAsPlainText>true</recognizeAsPlainText></con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>msisdn</con:property>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:restartOnRun>true</con:restartOnRun>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="redeemVoucher_Package" id="edafe727-65fc-4c34-a5a5-982b22bf4345">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>VoucherRedemptionEvolutionServiceSoapBinding</con:interface>
      <con:operation>redeemVoucher</con:operation>
      <con:request name="redeemVoucher_Package" useWsAddressing="true" id="2e105074-7815-403e-a90c-38fdfd244022" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:RedeemVoucher>
         <msisdn>${DataSource-MSISDNs#msisdn}</msisdn>
         <voucherCode>8000000${#Project#Random8}0</voucherCode>
      </soap:RedeemVoucher>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="1c0367f3-2a65-43fc-974a-65e559731c57"/>
        <con:assertion type="Schema Compliance" id="8c854cff-f1f0-4d59-8566-b53c1c678fe3">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c5e1e49d-7245-4e77-8b7b-49dc0e146fb4"/>
        <con:assertion type="MessageContentAssertion" id="8dadbc86-ab7a-4256-bd14-721d4a952e82" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/success[1]</con:xpath>
              <con:element>success</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/resultCode[1]</con:xpath>
              <con:element>resultCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/voucherType[1]</con:xpath>
              <con:element>voucherType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>PACK</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/packName[1]</con:xpath>
              <con:element>packName</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>TestPack</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Header>
      <Action xmlns="http://www.w3.org/2005/08/addressing">urn:tefo2de:VoucherRedemptionEvolutionService:VoucherRedemptionEvolutionServicePort:redeemVoucherResponse</Action>
      <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:2c8d871a-1146-432b-835a-285f764b7673</MessageID>
      <To xmlns="http://www.w3.org/2005/08/addressing">http://www.w3.org/2005/08/addressing/anonymous</To>
      <RelatesTo xmlns="http://www.w3.org/2005/08/addressing">uuid:380b3336-fea2-4c5b-b4b9-a5febce6e7ee</RelatesTo>
   </soap:Header>
   <soap:Body>
      <ns2:RedeemVoucherResponse xmlns:ns2="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
         <result>
            <success>true</success>
            <resultCode>0</resultCode>
         </result>
         <voucherType>PACK</voucherType>
         <packName>TestPack</packName>
      </ns2:RedeemVoucherResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
          <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
          <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
          <con:authType>Global HTTP Settings</con:authType>
        </con:credentials>
        <con:environmentSpec>
          <con:entry environmentId="18ada261-dd9a-45b4-9a95-6c2beddd0498">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>Basic</con:authProfile>
            <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
            <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>Basic</con:authProfile>
            <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
            <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>Basic</con:authProfile>
            <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
            <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" addDefaultAction="true" from="urn:U-941" messageID="" generateMessageId="true"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="redeemVoucher_Monetary" id="99a838f4-c379-45ba-8294-f1be0f72652f">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>VoucherRedemptionEvolutionServiceSoapBinding</con:interface>
      <con:operation>redeemVoucher</con:operation>
      <con:request name="redeemVoucher_Monetary" useWsAddressing="true" id="2e105074-7815-403e-a90c-38fdfd244022" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:RedeemVoucher>
         <msisdn>${DataSource-MSISDNs#msisdn}</msisdn>
         <voucherCode>9000000${#Project#Random8}0</voucherCode>
      </soap:RedeemVoucher>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="1c0367f3-2a65-43fc-974a-65e559731c57"/>
        <con:assertion type="Schema Compliance" id="8c854cff-f1f0-4d59-8566-b53c1c678fe3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c5e1e49d-7245-4e77-8b7b-49dc0e146fb4"/>
        <con:assertion type="MessageContentAssertion" id="96d2d926-50f6-4054-93f6-8c8d264e91c2" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/success[1]</con:xpath>
              <con:element>success</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/resultCode[1]</con:xpath>
              <con:element>resultCode</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/voucherType[1]</con:xpath>
              <con:element>voucherType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>MONETARY</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/monetaryAmount[1]</con:xpath>
              <con:element>monetaryAmount</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>&lt;</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]</con:xpath>
              <con:element>ns2:RedeemVoucherResponse</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:RedeemVoucherResponse xmlns:ns2="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
         <result>
            <success>true</success>
            <resultCode>0</resultCode>
         </result>
         <voucherType>MONETARY</voucherType>
         <monetaryAmount>3800</monetaryAmount>
      </ns2:RedeemVoucherResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username>intf_mce</con:username>
          <con:password>pwdmcedrc</con:password>
          <con:selectedAuthProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:environmentSpec>
          <con:entry environmentId="18ada261-dd9a-45b4-9a95-6c2beddd0498">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" addDefaultAction="true" from="urn:U-941" generateMessageId="true"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="DataSource Loop" id="35eefdd9-ba37-41c6-bf96-87974b5f9f10">
    <con:settings/>
    <con:config>
      <dataSourceStep>DataSource-MSISDNs</dataSourceStep>
      <targetStep>redeemVoucher_Package</targetStep>
      <discardResults>true</discardResults>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>713d3f2d-7672-420e-81df-7caa3ff84e40</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>06dfc37e-dd76-4102-877a-161179cffb33</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>87140655-d99a-4b41-b741-7ef4dff7ee4a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5efc97ad-9395-4cfe-a3cc-158c1693eae5</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>2b19a243-f4ee-40f2-9550-46e108cd9999</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>28f779e4-ca77-4c96-8b85-5a06e6f02c12</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>