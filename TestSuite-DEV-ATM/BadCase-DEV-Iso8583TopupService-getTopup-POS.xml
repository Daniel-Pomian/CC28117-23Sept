<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="1b6d874a-50ce-4b31-8429-05394a4be43d" discardOkResults="true" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="BadCase-DEV-Iso8583TopupService-getTopup-POS" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" maxResults="0" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests all combination for getTopup with min. one wrong parameter value in request different from parameter value in topup.
Type: POS</con:description>
  <con:settings>
    <con:setting id="32e090ee-f24c-48da-b6e6-a597e2b36a5efileName">GoodCase-DEV-ATM-TopupService</con:setting>
    <con:setting id="f812dbba-1d26-43cb-b890-33e55514a727fileName">BadCase-DEV-Iso8583TopupService-getTopup-POS</con:setting>
    <con:setting id="1b6d874a-50ce-4b31-8429-05394a4be43dfileName">BadCase-DEV-Iso8583TopupService-getTopup-POS</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="transfer" name="_Property Transfer_ClearProperties" id="7485663a-2619-4a9f-955b-e280e99845f3">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="false" transferTextContent="false" failOnError="false" disabled="false" entitize="true" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false">
        <con:name>1</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>MSISDN</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>XPATH</con:type>
        <con:targetTransferType>XPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false">
        <con:name>2</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>Date</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>XPATH</con:type>
        <con:targetTransferType>XPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false">
        <con:name>3</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>ID_1</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>XPATH</con:type>
        <con:targetTransferType>XPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false">
        <con:name>4</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>ID_2</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>XPATH</con:type>
        <con:targetTransferType>XPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false">
        <con:name>5</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>ID_3</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>XPATH</con:type>
        <con:targetTransferType>XPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="_Groovy Script-CreateTestData" id="76c11485-5f1d-43db-8d31-4edbc733f2f2">
    <con:settings/>
    <con:config>
      <script>/*
 * This script format generated msisdns to format 0+number
 * Date: 21.10..2016
 * Autor: Michael Gordon
*/

 // set in properties msisdns
 testRunner.testCase.setPropertyValue('MSISDN',context.expand( '${#Project#MSISDN-Piranha-OK}' ))
 testRunner.testCase.setPropertyValue('Date',context.expand( '${#Project#DateTime_Current_Offset}' ))
 testRunner.testCase.setPropertyValue('ID_1','1'+context.expand( '${#Project#Random5}' ))
 testRunner.testCase.setPropertyValue('ID_2','2'+context.expand( '${#Project#Random5}' ))
 testRunner.testCase.setPropertyValue('ID_3','3'+context.expand( '${#Project#Random5}' ))</script>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="4867b357-568e-4a5b-a307-c0a80c212fd4" name="getTopup_unknown_Wrong" disabled="true">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="getTopup_unknown_Wrong" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getRelatedTopup>
         <transactionData>
            <amount>${#TestCase#Amount}</amount>
            <msisdn>${#TestCase#MSISDN}</msisdn>
            <paymentDate>${#TestCase#Date}</paymentDate>
            <cardType>13</cardType>
            <partnerId>${#TestSuite#Partner-3-Code}  ${#TestSuite#BLZ}</partnerId>
            <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
            <serverId>252501</serverId>
            <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
            <transactionId>${#TestCase#ID_2}</transactionId>
         </transactionData>
      </v1:getRelatedTopup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="18f54304-6c9f-4887-a566-c8032da93cca" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="ed3e15f3-d80b-42d8-aef9-bee8e8ad3baa" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="b4f3e4ed-18c4-4479-87d5-abda75a0dda8" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="28797ee9-7d60-4854-851c-02eb91b95764" name="Match content of [ns2:getRelatedTopupResponse]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//ns2:getRelatedTopupResponse[1]</path>
            <content>&lt;ns2:getRelatedTopupResponse xmlns:ns2="http://directrecharge.o2.com/iso8583topupservice/v1/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"/></content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="73925c9a-9735-464d-ad10-79a9c416f03d" name="_topup-OK">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>topup</con:operation>
      <con:request name="_topup-OK" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="67dc7fd1-86bb-4512-bba8-a83d6b9f45fb">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:topup>
         <transactionRequestData>
            <transactionData>
               <amount>${#TestCase#Amount}</amount>
               <msisdn>${#TestCase#MSISDN}</msisdn>
               <paymentDate>${#TestCase#Date}</paymentDate>
               <cardType>13</cardType>
               <partnerId>${#TestSuite#Partner-3-Code}  ${#TestSuite#BLZ}</partnerId>
               <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
               <serverId>252501</serverId>
               <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
               <transactionId>${#TestCase#ID_2}</transactionId>
            </transactionData>
            <isoGwServerId>280105</isoGwServerId>
            <iso8583Protocol>POS</iso8583Protocol>
         </transactionRequestData>
      </v1:topup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="43d994ef-a347-4c5d-8f75-9c15148642a6"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="75fe068b-c553-4271-96cb-37eef9827121">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="af508552-f4e6-4d52-808d-2c305a18f26a"/>
        <con:assertion type="MessageContentAssertion" name="Message Content Assertion" id="d591a227-a733-4dc8-8a9a-7a47a8ace5a3">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://directrecharge.o2.com/iso8583topupservice/v1/';
//ns1:topupResponse[1]/transactionResultData[1]/duplicate[1]</con:xpath>
              <con:element>duplicate</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>false</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://directrecharge.o2.com/iso8583topupservice/v1/';
//ns1:topupResponse[1]/transactionResultData[1]/failed[1]</con:xpath>
              <con:element>failed</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>false</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://directrecharge.o2.com/iso8583topupservice/v1/';
//ns1:topupResponse[1]/transactionResultData[1]/correlationId[1]</con:xpath>
              <con:element>correlationId</con:element>
              <con:type>XmlString</con:type>
              <con:operator>&lt;</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://directrecharge.o2.com/iso8583topupservice/v1/';
//ns1:topupResponse[1]/transactionResultData[1]/tenantId[1]</con:xpath>
              <con:element>tenantId</con:element>
              <con:type>XmlInt</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:topupResponse xmlns:ns2="http://directrecharge.o2.com/iso8583topupservice/v1/">
         <transactionResultData>
            <duplicate>false</duplicate>
            <failed>false</failed>
            <correlationId>239835319</correlationId>
            <tenantId>1</tenantId>
         </transactionResultData>
      </ns2:topupResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="topup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="e75a493a-e5f0-4d28-b448-be70950af6c3" name="_getTopup">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="_getTopup" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <v1:getRelatedTopup>${_topup-OK#RawRequest#declare namespace v1='http://directrecharge.o2.com/iso8583topupservice/v1/'; //v1:topup[1]/transactionRequestData[1]/transactionData[1]}
      </v1:getRelatedTopup>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="18f54304-6c9f-4887-a566-c8032da93cca" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="ed3e15f3-d80b-42d8-aef9-bee8e8ad3baa" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="b4f3e4ed-18c4-4479-87d5-abda75a0dda8" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="344defed-c15d-47bf-82ad-f27ae3bf3a46" name="Match content of [transactionResultData]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//ns2:getRelatedTopupResponse[1]/transactionResultData[1]</path>
            <content>${_topup-OK#Response#declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/'; //ns2:topupResponse[1]/transactionResultData[1]}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="8f383c1b-b541-4065-b488-877c0adba5c1" name="getTopup_unknown_WrongAmount">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="getTopup_unknown_WrongAmount" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getRelatedTopup>
         <transactionData>
            <amount>1</amount>
            <msisdn>${#TestCase#MSISDN}</msisdn>
            <paymentDate>${#TestCase#Date}</paymentDate>
            <cardType>13</cardType>
            <partnerId>${#TestSuite#Partner-3-Code}  ${#TestSuite#BLZ}</partnerId>
            <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
            <serverId>252501</serverId>
            <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
            <transactionId>${#TestCase#ID_2}</transactionId>
         </transactionData>
      </v1:getRelatedTopup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="eed647e6-0e6c-4373-8932-9592abe5913e"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="76a1d1f1-55ed-4aba-8687-64591f13b1e3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="303523da-dd9e-4a3f-8aa6-0b82b1279016"/>
        <con:assertion type="XPath Match" name="Match content of [transactionError]" id="9ba9c202-d787-422b-9bd5-8f05edd778f6">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//detail[1]/ns2:transactionFault[1]/transactionError[1]/text()</path>
            <content>UNKNOWN_TOPUP</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="d02ef1ed-f4f8-4baf-894e-84ee47c7fcf5" name="getTopup_unknown_WrongMSISDN">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="getTopup_unknown_WrongMSISDN" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getRelatedTopup>
         <transactionData>
            <amount>${#TestCase#Amount}</amount>
            <msisdn>${#Project#MSISDN-Piranha-OK}</msisdn>
            <paymentDate>${#TestCase#Date}</paymentDate>
            <cardType>13</cardType>
            <partnerId>${#TestSuite#Partner-3-Code}  ${#TestSuite#BLZ}</partnerId>
            <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
            <serverId>252501</serverId>
            <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
            <transactionId>${#TestCase#ID_2}</transactionId>
         </transactionData>
      </v1:getRelatedTopup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="7b629d8d-8b07-4590-b27b-570891b8a1ca"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="c7fcfcf2-d967-41b4-af5d-a70d00010dcc">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="b723011e-6af3-4f37-9bf6-3654939f48c2"/>
        <con:assertion type="XPath Match" name="Match content of [transactionError]" id="de078b65-d176-4c55-a9b0-5d5d4768287d">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//detail[1]/ns2:transactionFault[1]/transactionError[1]/text()</path>
            <content>UNKNOWN_TOPUP</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="70b7b993-afb7-4f0d-9e4c-0b3254be221e" name="getTopup_unknown-WrongDate">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="getTopup_unknown-WrongDate" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getRelatedTopup>
         <transactionData>
            <amount>${#TestCase#Amount}</amount>
            <msisdn>${#TestCase#MSISDN}</msisdn>
            <paymentDate>${#Project#Date_Future_Offset}</paymentDate>
            <cardType>13</cardType>
            <partnerId>${#TestSuite#Partner-3-Code}  ${#TestSuite#BLZ}</partnerId>
            <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
            <serverId>252501</serverId>
            <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
            <transactionId>${#TestCase#ID_2}</transactionId>
         </transactionData>
      </v1:getRelatedTopup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="c9e26700-a5ae-4e12-b1bf-75c353987c5b"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="dd670774-5d7b-432a-bd90-621aa7fd26c8">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="347cf25f-ba1d-4158-a1f8-30b3b7454969"/>
        <con:assertion type="XPath Match" name="Match content of [transactionError]" id="7da840a6-0dd1-4665-b22f-07edcb498796">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//detail[1]/ns2:transactionFault[1]/transactionError[1]/text()</path>
            <content>UNKNOWN_TOPUP</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="7fe8d0a0-d681-42b9-b76d-e9754e74755e" name="getTopup_unknown-WrongPartnerID">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="getTopup_unknown-WrongPartnerID" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getRelatedTopup>
         <transactionData>
            <amount>${#TestCase#Amount}</amount>
            <msisdn>${#TestCase#MSISDN}</msisdn>
            <paymentDate>${#TestCase#Date}</paymentDate>
            <cardType>13</cardType>
            <partnerId>${#TestSuite#Partner-1-Code}   ${#TestSuite#BLZ}</partnerId>
            <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
            <serverId>252501</serverId>
            <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
            <transactionId>${#TestCase#ID_2}</transactionId>
         </transactionData>
      </v1:getRelatedTopup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="73ad41bc-fea6-4181-9c4b-6a8243f38d1f"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="91e87c9d-f938-46e6-b420-b2a49804bea6">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="459ebb43-6df0-4bb8-a1e3-f4f7edf3ce37"/>
        <con:assertion type="XPath Match" name="Match content of [transactionError]" id="396b5aef-e6fa-40ca-b981-3e3616058bd6">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//detail[1]/ns2:transactionFault[1]/transactionError[1]/text()</path>
            <content>UNKNOWN_TOPUP</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="dc444e5b-d9ac-4cda-8cdf-d611fc3d9516" name="getTopup_unknown-WrongTransactID">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>Iso8583TopupServiceV1SoapBinding</con:interface>
      <con:operation>getRelatedTopup</con:operation>
      <con:request name="getTopup_unknown-WrongTransactID" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="c58b6405-41c3-434d-ba4f-8cc895b19c2b">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-ATMIso8583TopupService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v1="http://directrecharge.o2.com/iso8583topupservice/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getRelatedTopup>
         <transactionData>
            <amount>${#TestCase#Amount}</amount>
            <msisdn>${#TestCase#MSISDN}</msisdn>
            <paymentDate>${#TestCase#Date}</paymentDate>
            <cardType>13</cardType>
            <partnerId>${#TestSuite#Partner-3-Code}  ${#TestSuite#BLZ}</partnerId>
            <processingCode>${#TestSuite#abwZeichenTripleDES}</processingCode>
            <serverId>252501</serverId>
            <terminalId>${#TestSuite#NetzbetreiberID}${#TestSuite#TerminalID}</terminalId>
            <transactionId>${#TestCase#ID_3}</transactionId>
         </transactionData>
      </v1:getRelatedTopup>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="64e409b1-0872-4ea4-8813-d4c18ba2b35f"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="294be6d8-b70b-4bca-936e-e50a7732c475">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="Not SOAP Fault Assertion" name="SOAP Fault" id="13768193-c672-4abb-baf6-2a08938e01a1"/>
        <con:assertion type="XPath Match" name="Match content of [transactionError]" id="6271c4f0-76cc-450d-ae14-49b2e88dba90">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/iso8583topupservice/v1/';
//detail[1]/ns2:transactionFault[1]/transactionError[1]/text()</path>
            <content>UNKNOWN_TOPUP</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="getRelatedTopup"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>Amount</con:name>
      <con:value>199</con:value>
    </con:property>
    <con:property>
      <con:name>outAmount</con:name>
      <con:value>19900</con:value>
    </con:property>
    <con:property>
      <con:name>MSISDN</con:name>
      <con:value>4915936519113</con:value>
    </con:property>
    <con:property>
      <con:name>Date</con:name>
      <con:value>2022-10-03T16:01:12+02:00</con:value>
    </con:property>
    <con:property>
      <con:name>ID_1</con:name>
      <con:value>185307</con:value>
    </con:property>
    <con:property>
      <con:name>ID_2</con:name>
      <con:value>223145</con:value>
    </con:property>
    <con:property>
      <con:name>ID_3</con:name>
      <con:value>327524</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>6622bb1a-0b11-4fc8-8abd-0c1caa1a65fa</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5e193fcf-99d7-463a-820e-2d6d7c4d14fa</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ec2017e2-7ae3-4915-bdbe-002bc81ef7dd</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>4d2b0704-1b78-4c0c-af53-85c1f52d670a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>71012a18-6c96-4f3e-853d-3daed8ab96b1</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>123c9009-17a3-4919-b26e-e9204eb0c3c5</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>03bc7f54-6945-424b-84e3-961d609deada</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>0536c616-478d-4d56-b4fd-9453751b0360</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>67ba5508-1fa6-4039-bafd-8b47d7338db4</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5dbcaf3c-6977-4b2a-ad94-9be9bbd40b3b</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>32f3abca-75eb-4749-b035-b41d0564b22a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5a79fd1b-eb2e-4969-be54-3227501b844c</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ed346e7f-88d4-4e43-8949-b665e24c02f6</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>689d2da7-ec76-46b0-aca8-de6b8002191e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>399c625c-0423-4234-8fd6-161bd9183595</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>e1c20fa6-f34e-408e-9e74-0cb64a06a853</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>3678fb34-7796-4f45-bc95-2bb65cf9097f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5c98d4f5-2e3e-40e0-a455-28457da675bd</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>afe647c7-f983-4dad-bb12-41b54f0488b9</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>7b1c4747-cc17-4282-a493-50ac0d578088</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>8d1ffa8a-550e-44c7-bb4a-26f6b3b3bac0</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>08f3d5ce-58d1-4f47-a63d-1de1f7bb5f2d</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>d7d28b83-6cc1-4d46-b751-b198bb1ebc16</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>3cfad89c-c380-4ff4-9dbb-907f0ee21a83</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>05e6ae98-bed3-4254-adc6-f2d0053d0830</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>8cda6813-086d-4ba8-9baf-ddf8506b4e6f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>654c95de-bb58-4b6a-9878-fdc1f144aa23</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
