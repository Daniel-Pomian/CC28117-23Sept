<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="deaebde7-da25-40fd-8a08-575790ba26a2" discardOkResults="true" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="GoodCase-DEV-MSISDN-Format" searchProperties="true" timeout="0" maxResults="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests voucher redeemtion with different msisdn formats</con:description>
  <con:settings>
    <con:setting id="deaebde7-da25-40fd-8a08-575790ba26a2fileName">GoodCase-DEV-MSISDN-Format</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datasource" name="DataSource-MSISDNs" id="ecc54746-008e-430f-8079-a297df3c6606">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="Grid">
        <con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">49176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">49176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0049176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0049176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">+49176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">+49176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><recognizeAsPlainText>true</recognizeAsPlainText></con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>msisdn</con:property>
      <con:startRow/>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="redeemVoucher_Package" id="3be92ee7-b2ce-4074-8827-13eb14cf1a86">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>VoucherRedemptionEvolutionServiceSoapBinding</con:interface>
      <con:operation>redeemVoucher</con:operation>
      <con:request name="redeemVoucher_Package" useWsAddressing="true" id="2e105074-7815-403e-a90c-38fdfd244022" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:RedeemVoucher>
         <msisdn>${DataSource-MSISDNs#msisdn}</msisdn>
         <voucherCode>${#TestSuite#voucher-Pack-OK}</voucherCode>
      </soap:RedeemVoucher>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="1c0367f3-2a65-43fc-974a-65e559731c57"/>
        <con:assertion type="Schema Compliance" id="8c854cff-f1f0-4d59-8566-b53c1c678fe3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c5e1e49d-7245-4e77-8b7b-49dc0e146fb4"/>
        <con:assertion type="MessageContentAssertion" id="8fd63a1c-1c30-450c-938e-63c75dabdb36" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/success[1]</con:xpath>
              <con:element>success</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/resultCode[1]</con:xpath>
              <con:element>resultCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/voucherType[1]</con:xpath>
              <con:element>voucherType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>PACK</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Header>
      <Action xmlns="http://www.w3.org/2005/08/addressing">urn:tefo2de:VoucherRedemptionEvolutionService:VoucherRedemptionEvolutionServicePort:redeemVoucherResponse</Action>
      <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:5f00edfb-6784-40fd-a3dd-b38d76f44993</MessageID>
      <To xmlns="http://www.w3.org/2005/08/addressing">http://www.w3.org/2005/08/addressing/anonymous</To>
      <RelatesTo xmlns="http://www.w3.org/2005/08/addressing">uuid:faf5cc6c-8327-41c3-a936-ff08b40b8ac1</RelatesTo>
   </soap:Header>
   <soap:Body>
      <ns2:RedeemVoucherResponse xmlns:ns2="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
         <result>
            <success>true</success>
            <resultCode>0</resultCode>
         </result>
         <voucherType>PACK</voucherType>
         <packName>TestPack</packName>
      </ns2:RedeemVoucherResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username>intf_mce</con:username>
          <con:password>pwdmcedrc</con:password>
          <con:selectedAuthProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:environmentSpec>
          <con:entry environmentId="18ada261-dd9a-45b4-9a95-6c2beddd0498">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Service</con:authProfile>
          </con:entry>
        </con:environmentSpec>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" addDefaultAction="true" from="urn:${#TestSuite#Partner-MCE-All}" generateMessageId="true"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="redeemVoucher_Monetary" id="cefeb2cf-eed6-4d38-b751-ddb228402a78">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>VoucherRedemptionEvolutionServiceSoapBinding</con:interface>
      <con:operation>redeemVoucher</con:operation>
      <con:request name="redeemVoucher_Monetary" useWsAddressing="true" id="2e105074-7815-403e-a90c-38fdfd244022" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:RedeemVoucher>
         <msisdn>${DataSource-MSISDNs#msisdn}</msisdn>
         <voucherCode>${#TestSuite#voucher-Money-OK}</voucherCode>
      </soap:RedeemVoucher>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="1c0367f3-2a65-43fc-974a-65e559731c57"/>
        <con:assertion type="Schema Compliance" id="8c854cff-f1f0-4d59-8566-b53c1c678fe3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c5e1e49d-7245-4e77-8b7b-49dc0e146fb4"/>
        <con:assertion type="MessageContentAssertion" id="96d2d926-50f6-4054-93f6-8c8d264e91c2" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/success[1]</con:xpath>
              <con:element>success</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/resultCode[1]</con:xpath>
              <con:element>resultCode</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/voucherType[1]</con:xpath>
              <con:element>voucherType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>MONETARY</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/monetaryAmount[1]</con:xpath>
              <con:element>monetaryAmount</con:element>
              <con:type>XmlLong</con:type>
              <con:operator>&lt;</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]</con:xpath>
              <con:element>ns2:RedeemVoucherResponse</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue/>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:RedeemVoucherResponse xmlns:ns2="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
         <result>
            <success>true</success>
            <resultCode>0</resultCode>
         </result>
         <voucherType>MONETARY</voucherType>
         <monetaryAmount>3800</monetaryAmount>
      </ns2:RedeemVoucherResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username>intf_mce</con:username>
          <con:password>pwdmcedrc</con:password>
          <con:selectedAuthProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:environmentSpec>
          <con:entry environmentId="18ada261-dd9a-45b4-9a95-6c2beddd0498">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Service</con:authProfile>
          </con:entry>
        </con:environmentSpec>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" addDefaultAction="true" from="urn:${#TestSuite#Partner-MCE-All}" generateMessageId="true"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="DataSource Loop" id="95abbe79-593f-4f48-a338-31a62034c58e">
    <con:settings/>
    <con:config>
      <dataSourceStep>DataSource-MSISDNs</dataSourceStep>
      <targetStep>redeemVoucher_Package</targetStep>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>ContractID</con:name>
      <con:value>727641751860950</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>b4f6f1ae-848f-4f2d-b47e-74c4d1bd16b2</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>555aa38e-4221-4b78-93c9-35d0721785cc</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>3f19fc3e-cbe0-448c-af5f-e08e71739435</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>8d37240c-53e9-4231-9673-3cf613eedb08</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>1ede1a9a-1711-40a1-b4c5-0aa0b712a28d</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ecc54746-008e-430f-8079-a297df3c6606</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>3be92ee7-b2ce-4074-8827-13eb14cf1a86</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>95abbe79-593f-4f48-a338-31a62034c58e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>cefeb2cf-eed6-4d38-b751-ddb228402a78</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>