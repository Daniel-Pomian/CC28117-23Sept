<?xml version="1.0" encoding="UTF-8"?>
<con:testCase failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="GoodCase-DEV-redeemVoucher-Package" searchProperties="true" id="dbb9c3df-4e9e-4979-936c-5bc715b11b6d" discardOkResults="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests positiv test-case for redeem package voucher

test base is documentation:
http://mucsgsvn03.sg.de.pri.o2.com/svn/drcrepo/trunk/SRs/FASAD/ST_OVD_DP_DRC_FASAD.docx

EDR validation data for test-cases:
For validation of EDR-Files in data base values from operation system are used like in examples below.

PACK_COMMIT_SUCCESSFUL(1, "951100")
---------------------------------------
20160222163114,1200051661,,VoucherRecharge,,4917675543496,951100,o2,,,919121648825,608912-0005-1661,01|P0SurfWoc,EUR,0,1,0,,DRC,1200051661,,,,,,

MONETARY_COMMIT_FAILED(3, "951122");
---------------------------------------
20160106220000,4100016785,,VoucherRecharge,,4917628086392,951122,o2,,,453791292777,613941-0001-6785,01 ,EUR,2000,2,0,,DRC,4100016785,,,,,,

PACK_COMMIT_FAILED(2, "951122");
---------------------------------------
20120608131425,2000006952,,VoucherRecharge,,4917689503506,951122,o2,,,448515024890,560620-0000-6952,01|P25EinetpaL,EUR,,1,0,,DRC,2000006952,,,,,,</con:description>
  <con:settings>
    <con:setting id="FlowLayout">true</con:setting>
    <con:setting id="dbb9c3df-4e9e-4979-936c-5bc715b11b6dfileName">GoodCase-DEV-redeemVoucher-Package</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="transfer" name="_Property Transfer_cleanup" id="5efc97ad-9395-4cfe-a3cc-158c1693eae5">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>1</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>MSISDN</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false">
        <con:name>2</con:name>
        <con:sourceType>StringEmpty</con:sourceType>
        <con:sourceStep>#Project#</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>Voucher</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:type>XPATH</con:type>
        <con:targetTransferType>XPATH</con:targetTransferType>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="_DRCGUI-PROCESS_EDR_RECORDS" id="d5a2fc85-f19d-402d-bb7a-66a48cfd8ec5">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>triggerJobManager</con:operation>
      <con:request name="_DRCGUI-PROCESS_EDR_RECORDS" id="ed6a8062-e73c-460c-adac-b00b5436da8e">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/common/job/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:triggerJobManager>
         <jobName>com.o2.directrecharge.core.job.JobAction.PROCESS_EDR_RECORDS</jobName>
         <repeat>true</repeat>
      </v1:triggerJobManager>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="bb14e6f7-3e98-4e77-9cdf-2ff18ab24504"/>
        <con:assertion type="Schema Compliance" id="01691f52-f854-475f-af63-7c7b1d52d166">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="163cb7e1-016e-47fa-b0ad-7683d12450cc"/>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="httprequest" name="_HTTP-ClearMockLogs" id="3e819dc4-41c7-45af-ab7b-d09c766d68a7">
    <con:settings/>
    <con:config method="GET" xsi:type="con:HttpRequest" id="56778dc8-8217-495c-b383-214c79b1d8a9" name="_HTTP-ClearMockLogs" downloadIncludedResources="false" postQueryString="false" mediaType="application/xml" multiValueDelimiter="" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:settings>
        <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        <con:setting id="com.eviware.soapui.settings.CommonSettings@entitizeProperties">false</con:setting>
        <con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@dump-file"/>
        <con:setting id="discardResponse">false</con:setting>
      </con:settings>
      <con:encoding/>
      <con:endpoint>${#Project#drc-Mocks-URL}log?clear</con:endpoint>
      <con:request/>
      <con:assertion type="Valid HTTP Status Codes" id="153285f9-6e44-4544-a2fc-7890d817d456" name="Valid HTTP Status Codes">
        <con:settings/>
        <con:configuration>
          <codes>200</codes>
        </con:configuration>
      </con:assertion>
      <con:credentials>
        <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
        <con:authType>No Authorization</con:authType>
      </con:credentials>
      <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
      <con:parameters/>
      <con:environmentSpec>
        <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
          <con:authProfile>Inherit From Parent</con:authProfile>
        </con:entry>
      </con:environmentSpec>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="010P_redeemVoucher_Package" id="94697a03-85ce-4294-afb3-9c8b9cb5e76d">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>VoucherRedemptionEvolutionServiceSoapBinding</con:interface>
      <con:operation>redeemVoucher</con:operation>
      <con:request name="010P_redeemVoucher_Package" useWsAddressing="true" id="2e105074-7815-403e-a90c-38fdfd244022" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:RedeemVoucher>
         <msisdn>${#Project#MSISDN-Piranha-OK}</msisdn>
         <voucherCode>${#TestSuite#voucher-Pack-OK}</voucherCode>
      </soap:RedeemVoucher>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="1c0367f3-2a65-43fc-974a-65e559731c57"/>
        <con:assertion type="Schema Compliance" id="8c854cff-f1f0-4d59-8566-b53c1c678fe3">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="c5e1e49d-7245-4e77-8b7b-49dc0e146fb4"/>
        <con:assertion type="MessageContentAssertion" id="ae4900b4-078e-46b8-b299-4eaefbd0669e" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/success[1]</con:xpath>
              <con:element>success</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/resultCode[1]</con:xpath>
              <con:element>resultCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>0</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/voucherType[1]</con:xpath>
              <con:element>voucherType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>PACK</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/packName[1]</con:xpath>
              <con:element>packName</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>TestPack</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Header>
      <Action xmlns="http://www.w3.org/2005/08/addressing">urn:tefo2de:VoucherRedemptionEvolutionService:VoucherRedemptionEvolutionServicePort:redeemVoucherResponse</Action>
      <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:cef94c2e-be62-4db0-9f7c-c238ad7af52b</MessageID>
      <To xmlns="http://www.w3.org/2005/08/addressing">http://www.w3.org/2005/08/addressing/anonymous</To>
      <RelatesTo xmlns="http://www.w3.org/2005/08/addressing">uuid:4f4217e0-2206-4a7c-9608-d95df894a80c</RelatesTo>
   </soap:Header>
   <soap:Body>
      <ns2:RedeemVoucherResponse xmlns:ns2="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
         <result>
            <success>true</success>
            <resultCode>0</resultCode>
         </result>
         <voucherType>PACK</voucherType>
         <packName>TestPack</packName>
      </ns2:RedeemVoucherResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
          <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
          <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
          <con:authType>Global HTTP Settings</con:authType>
        </con:credentials>
        <con:environmentSpec>
          <con:entry environmentId="18ada261-dd9a-45b4-9a95-6c2beddd0498">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>Basic</con:authProfile>
            <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
            <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>Basic</con:authProfile>
            <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
            <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>Basic</con:authProfile>
            <con:username>${#Project#drc-voucherRedemptionEvolutionService-User}</con:username>
            <con:password>${#Project#drc-voucherRedemptionEvolutionService-Password}</con:password>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Service</con:authProfile>
          </con:entry>
        </con:environmentSpec>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" addDefaultAction="true" from="urn:${#TestSuite#Partner-MCE-All}" messageID="" generateMessageId="true"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="_Property Transfer-Data" id="06dfc37e-dd76-4102-877a-161179cffb33">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>msisdn</con:name>
        <con:sourceType>RawRequest</con:sourceType>
        <con:sourceStep>010P_redeemVoucher_Package</con:sourceStep>
        <con:sourcePath>declare namespace soap='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//soap:RedeemVoucher[1]/msisdn[1]</con:sourcePath>
        <con:targetType>MSISDN</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>voucherCode</con:name>
        <con:sourceType>RawRequest</con:sourceType>
        <con:sourceStep>010P_redeemVoucher_Package</con:sourceStep>
        <con:sourcePath>declare namespace soap='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//soap:RedeemVoucher[1]/voucherCode[1]</con:sourcePath>
        <con:targetType>Voucher</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="010P_JDBC Request-ValidateEDR-File" id="87140655-d99a-4b41-b741-7ef4dff7ee4a">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>drc-db</con:dbConnectionName>
      <con:driver>${#Project#drc-db-driver}</con:driver>
      <con:connectionString>${#Project#drc-db-connString}</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>${#TestSuite#orcacle-query-getEDRfromVoucherCode}</con:query>
      <con:storedProcedure>false</con:storedProcedure>
      <con:assertion type="JDBC Status" id="f181e8d5-b8e8-47d2-8662-26e34a60d7cd" name="JDBC Status"/>
      <con:assertion type="XPath Match" id="013b4b10-3c01-4772-8ba0-82b899960429" name="Check count of [EDR]">
        <con:configuration>
          <path>count( //Results/ResultSet/Row/EDR)</path>
          <content>1</content>
          <allowWildcards>false</allowWildcards>
          <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
          <ignoreComments>true</ignoreComments>
        </con:configuration>
      </con:assertion>
      <con:assertion type="XPath Match" id="38ed7654-f8c8-469f-a71e-e15558470c66" name="Match content of [EDR]- Content-with-Code-951100">
        <con:configuration>
          <path>//Results[1]/ResultSet[1]/Row[1]/EDR[1]/text()</path>
          <content>${#Project#Date_Current_String_yyyyMMdd}*,*,,VoucherRecharge,,${#TestCase#MSISDN},951100,${#TestSuite#EDR-VoMS-Provider},,,${#TestCase#Voucher},*,*|*,EUR,0,1,0,,DRC,*,,,,,,</content>
          <allowWildcards>true</allowWildcards>
          <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
          <ignoreComments>false</ignoreComments>
        </con:configuration>
      </con:assertion>
      <con:properties>
        <con:property>
          <con:name>voucherCode</con:name>
          <con:value>${#TestCase#Voucher}</con:value>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="110P_redeemVoucher_Package_again-DRC-resultCode=1" id="713d3f2d-7672-420e-81df-7caa3ff84e40">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>VoucherRedemptionEvolutionServiceSoapBinding</con:interface>
      <con:operation>redeemVoucher</con:operation>
      <con:request name="110P_redeemVoucher_Package_again-DRC-resultCode=1" useWsAddressing="true" id="2e105074-7815-403e-a90c-38fdfd244022" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soap="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
   <soapenv:Header/>
   <soapenv:Body>
      <soap:RedeemVoucher>
         <msisdn>${#TestCase#MSISDN}</msisdn>
         <voucherCode>${#TestCase#Voucher}</voucherCode>
      </soap:RedeemVoucher>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" name="SOAP Response" id="34dc27cd-3228-4ce6-a11f-508df2bfc253"/>
        <con:assertion type="Schema Compliance" name="Schema Compliance" id="5bef9236-b038-4acf-ad70-a4f6ee422ac3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" name="Not SOAP Fault" id="a8637b9e-df61-4fbb-8b98-71fcecd0e75c"/>
        <con:assertion type="MessageContentAssertion" id="067a02ee-78f6-4b61-b88e-eab72870677e" name="Message Content Assertion">
          <con:configuration xsi:type="con:MessageContentAssertion">
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/success[1]</con:xpath>
              <con:element>success</con:element>
              <con:type>XmlBoolean</con:type>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>true</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/result[1]/resultCode[1]</con:xpath>
              <con:element>resultCode</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>1</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>true</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/voucherType[1]</con:xpath>
              <con:element>voucherType</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>PACK</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:elements>
              <con:xpath>declare namespace ns1='http://soap.types.soa.voucherredemption.service.directrecharge.o2.com';
//ns1:RedeemVoucherResponse[1]/packName[1]</con:xpath>
              <con:element>packName</con:element>
              <con:type xsi:nil="true"/>
              <con:operator>=</con:operator>
              <con:enabled>true</con:enabled>
              <con:expectedValue>TestPack</con:expectedValue>
              <con:hasValue>false</con:hasValue>
              <con:numberType>false</con:numberType>
            </con:elements>
            <con:originalMessage><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Header>
      <Action xmlns="http://www.w3.org/2005/08/addressing">urn:tefo2de:VoucherRedemptionEvolutionService:VoucherRedemptionEvolutionServicePort:redeemVoucherResponse</Action>
      <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:6d413b08-4c59-4296-a134-eb8a0d2125ee</MessageID>
      <To xmlns="http://www.w3.org/2005/08/addressing">http://www.w3.org/2005/08/addressing/anonymous</To>
      <RelatesTo xmlns="http://www.w3.org/2005/08/addressing">uuid:bfe9ce94-1cf9-4156-8c44-c509966090ba</RelatesTo>
   </soap:Header>
   <soap:Body>
      <ns2:RedeemVoucherResponse xmlns:ns2="http://soap.types.soa.voucherredemption.service.directrecharge.o2.com">
         <result>
            <success>true</success>
            <resultCode>1</resultCode>
         </result>
         <voucherType>PACK</voucherType>
         <packName>TestPack</packName>
      </ns2:RedeemVoucherResponse>
   </soap:Body>
</soap:Envelope>]]></con:originalMessage>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:username>intf_mce</con:username>
          <con:password>pwdmcedrc</con:password>
          <con:selectedAuthProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:environmentSpec>
          <con:entry environmentId="18ada261-dd9a-45b4-9a95-6c2beddd0498">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>${#Project#drc-voucherRedemptionEvolutionService-URL}</con:authProfile>
            <con:username>intf_mce</con:username>
            <con:password>pwdmcedrc</con:password>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Service</con:authProfile>
          </con:entry>
        </con:environmentSpec>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" addDefaultAction="true" from="urn:${#TestSuite#Partner-MCE-All}" generateMessageId="true"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="httprequest" name="111P_HTTP-ValidateResponsesFromMocks" id="2f5f6c5f-3400-45fe-b2e0-670a715d63f3">
    <con:settings/>
    <con:config method="GET" xsi:type="con:HttpRequest" id="1ac0cffb-2fd8-436d-8bbc-bc723dbad492" name="111P_HTTP-ValidateResponsesFromMocks" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:settings>
        <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
      </con:settings>
      <con:endpoint>${#Project#drc-Mocks-URL}log</con:endpoint>
      <con:request/>
      <con:assertion type="Valid HTTP Status Codes" id="61f57801-b402-497d-ac2b-af4d1e06ea88" name="Valid HTTP Status Codes">
        <con:settings/>
        <con:configuration>
          <codes>200</codes>
        </con:configuration>
      </con:assertion>
      <con:assertion type="Simple NotContains" id="6b291aad-18e3-4557-89b8-bc16f9854d2c" name="Not Contains-OCS">
        <con:configuration>
          <token>OCS</token>
          <ignoreCase>true</ignoreCase>
          <useRegEx>false</useRegEx>
        </con:configuration>
      </con:assertion>
      <con:assertion type="MessageContentAssertion" id="4059fef6-a968-411b-b725-4aa98c2d01f1" name="Message Content Assertion">
        <con:configuration xsi:type="con:MessageContentAssertion">
          <con:elements>
            <con:xpath>//html[1]/body[1]/table[1]/tr[2]/td[3]</con:xpath>
            <con:element>td</con:element>
            <con:type xsi:nil="true"/>
            <con:operator>=</con:operator>
            <con:enabled>true</con:enabled>
            <con:expectedValue>Piranha-StackService.getStackDetails: Return response for request with MSISDN: ${#TestCase#MSISDN}</con:expectedValue>
            <con:hasValue>false</con:hasValue>
            <con:numberType>false</con:numberType>
          </con:elements>
          <con:originalMessage><![CDATA[<html>
   <head>
      <title>Virt Groovy Log</title>
      <meta http-equiv="refresh" content="15"/>
      <link type="text/css" rel="stylesheet" href="stylesheet.css"/>
   </head>
   <body>
      <p>
         <b>Groovy Log output</b>
         : [
         <a href="log">Refresh</a>
         ] [
         <a href="log?clear">Clear</a>
         ]
      </p>
      <table border="1">
         <tr>
            <td/>
            <td>Timestamp</td>
            <td>Message</td>
         </tr>
         <tr>
            <td>1</td>
            <td>Mon Mar 25 17:44:59 CET 2019</td>
            <td>Piranha-StackService.getStackDetails: Return response for request with MSISDN: 4915993757360</td>
         </tr>
      </table>
   </body>
</html>]]></con:originalMessage>
        </con:configuration>
      </con:assertion>
      <con:credentials>
        <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
        <con:authType>No Authorization</con:authType>
      </con:credentials>
      <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
      <con:jmsPropertyConfig/>
      <con:parameters/>
      <con:environmentSpec>
        <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
          <con:authProfile>No Authorization</con:authProfile>
        </con:entry>
        <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
          <con:authProfile>Inherit From Parent</con:authProfile>
        </con:entry>
      </con:environmentSpec>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="DRCGUI-PROCESS_EDR_RECORDS" id="45b3fdcf-0838-4300-b2ff-24faf2745e86">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>triggerJobManager</con:operation>
      <con:request name="DRCGUI-PROCESS_EDR_RECORDS" id="ed6a8062-e73c-460c-adac-b00b5436da8e">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/common/job/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:triggerJobManager>
         <jobName>com.o2.directrecharge.core.job.JobAction.PROCESS_EDR_RECORDS</jobName>
         <repeat>true</repeat>
      </v1:triggerJobManager>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="bb14e6f7-3e98-4e77-9cdf-2ff18ab24504"/>
        <con:assertion type="Schema Compliance" id="01691f52-f854-475f-af63-7c7b1d52d166">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="163cb7e1-016e-47fa-b0ad-7683d12450cc"/>
        <con:assertion type="XPath Match" id="2fe09f1a-e561-4787-8103-5bf9010f0313" name="Check count of [taskId]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/ws/common/job/v1/';
count( //ns2:triggerJobManagerResponse/taskId)>0</path>
            <content>true</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Run TestCase_Validate-JobMonitor-OK" id="e881b30b-a152-404c-beb0-f72dacb508d0">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>aef0f6ae-5942-4c5b-9ff4-00f4644fddfd</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>inJobName</con:name>
          <con:value>${DRCGUI-PROCESS_EDR_RECORDS#RawRequest#declare namespace type='http://directrecharge.o2.com/ws/drcgui/v1/'; //type:triggerJobManager[1]/jobName[1]}</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties/>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>MSISDN</con:name>
      <con:value>4915986676370</con:value>
    </con:property>
    <con:property>
      <con:name>Voucher</con:name>
      <con:value>8000000987573410</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>713d3f2d-7672-420e-81df-7caa3ff84e40</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>06dfc37e-dd76-4102-877a-161179cffb33</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>87140655-d99a-4b41-b741-7ef4dff7ee4a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>5efc97ad-9395-4cfe-a3cc-158c1693eae5</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>3e819dc4-41c7-45af-ab7b-d09c766d68a7</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>d5a2fc85-f19d-402d-bb7a-66a48cfd8ec5</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>45b3fdcf-0838-4300-b2ff-24faf2745e86</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>94697a03-85ce-4294-afb3-9c8b9cb5e76d</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>2f5f6c5f-3400-45fe-b2e0-670a715d63f3</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>e881b30b-a152-404c-beb0-f72dacb508d0</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
