<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="9e574247-e0fa-4539-aea1-5f9ad5039c36" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="GoodCase-DEV-getUserRolles" searchProperties="true" maxResults="0" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests configurated roles from data base on test environment</con:description>
  <con:settings>
    <con:setting id="9e574247-e0fa-4539-aea1-5f9ad5039c36fileName">GoodCase-DEV-getUserRolles</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="request" id="091024e2-c337-4d74-be2f-1e5bad821ab8" name="010P-getUserRoles-ALL">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>getUserRoles</con:operation>
      <con:request name="010P-getUserRoles-ALL" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="2bbc348f-188b-43fe-973a-6dd4f586f860">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="drc-gui-user" value="${#TestCase#TenantAdmin-Name}" xmlns="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/drcgui/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getUserRoles>
         <!--type: userClassificationTypeType - enumeration: [ALL,USER,ALL_ADMINS]-->
         <userClassificationType>ALL</userClassificationType>
      </v1:getUserRoles>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="29cdaa29-46c3-43d3-9d3e-94a078f0b1f3" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="bd4d1b4c-7320-41d9-98c8-738a91ff4d7c" name="Schema Compliance">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="fead350f-91ee-4525-8129-d179a2acf424" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="bf7d09cd-1ebf-4d44-89ad-ebc971b96f7f" name="Check count of [roles]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/ws/drcgui/v1/';
count( //ns2:getUserRolesResponse/roles)</path>
            <content>${#TestCase#Rolles-ALL-Count}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://directrecharge.o2.com/ws/drcgui/DrcGuiPortType/getRoles"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="c625ff7d-b831-4c25-bc70-2b54cb113997" name="020P-getUserRoles-Admins">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>getUserRoles</con:operation>
      <con:request name="020P-getUserRoles-Admins" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="2bbc348f-188b-43fe-973a-6dd4f586f860">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/drcgui/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getUserRoles>
         <!--type: userClassificationTypeType - enumeration: [ALL,USER,ALL_ADMINS]-->
         <userClassificationType>ALL_ADMINS</userClassificationType>
      </v1:getUserRoles>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="29cdaa29-46c3-43d3-9d3e-94a078f0b1f3" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="bd4d1b4c-7320-41d9-98c8-738a91ff4d7c" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="fead350f-91ee-4525-8129-d179a2acf424" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="9a5b6820-2674-4fd5-92cc-883b4b636636" name="Check count of [roles]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/ws/drcgui/v1/';
count( //ns2:getUserRolesResponse/roles)</path>
            <content>${#TestCase#Rolles-ALL-Admins}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://directrecharge.o2.com/ws/drcgui/DrcGuiPortType/getRoles"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="fd697062-96a4-45b3-b368-30df4bde1ce9" name="030P-getUserRoles-Users">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>getUserRoles</con:operation>
      <con:request name="030P-getUserRoles-Users" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="2bbc348f-188b-43fe-973a-6dd4f586f860">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/drcgui/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getUserRoles>
         <!--type: userClassificationTypeType - enumeration: [ALL,USER,ALL_ADMINS]-->
         <userClassificationType>USER</userClassificationType>
      </v1:getUserRoles>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="29cdaa29-46c3-43d3-9d3e-94a078f0b1f3" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="bd4d1b4c-7320-41d9-98c8-738a91ff4d7c" name="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="fead350f-91ee-4525-8129-d179a2acf424" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="e9620730-73e5-4523-8767-b8eddde6a0a2" name="Check count of [roles]">
          <con:configuration>
            <path>declare namespace ns4='http://directrecharge.o2.com/ws/drcgui/v1/';
count( //ns4:getUserRolesResponse/roles)=${#TestCase#Rolles-ALL-Count}-${#TestCase#Rolles-ALL-Admins}</path>
            <content>true</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://directrecharge.o2.com/ws/drcgui/DrcGuiPortType/getRoles"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>Rolles-ALL-Count</con:name>
      <con:value>8</con:value>
    </con:property>
    <con:property>
      <con:name>Rolles-ALL-Admins</con:name>
      <con:value>2</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
