<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="6a9a041c-3e4d-4d13-8519-854dcd7e39e9" discardOkResults="true" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="GoodCase-DEV-getPermissions" searchProperties="true" maxResults="0" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests configurated permissions from data base on test environment</con:description>
  <con:settings>
    <con:setting id="6a9a041c-3e4d-4d13-8519-854dcd7e39e9fileName">GoodCase-DEV-getPermissions</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="request" name="getPermissions-All" id="a3d04665-0f87-45d8-98ce-e293eef25b0b">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>getPermissions</con:operation>
      <con:request name="getPermissions-All" id="7ec1913d-6a25-497e-a66a-9ff0f69b00c4">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/drcgui/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getPermissions>
         <!--type: userClassificationTypeType - enumeration: [ALL,USER,ALL_ADMINS]-->
         <userClassificationType>ALL</userClassificationType>
      </v1:getPermissions>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="f668233b-2ec0-42ab-8d11-c1eeaa47d058"/>
        <con:assertion type="Schema Compliance" id="a370f08f-e29f-40d3-b94a-fcb5bd825ac3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="5094c8ad-5790-461a-bc81-5fb0b83440bf"/>
        <con:assertion type="XPath Match" name="Check count of [permissions]" id="2812954a-64f4-4603-a2f3-584581b817e3">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/ws/drcgui/v1/';
count( //ns2:getPermissionsResponse/permissions)</path>
            <content>${#TestCase#CountPerm-All}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="getPermissions-Admin" id="747a7bf3-4e2f-4c3f-afb1-212b36930314">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>getPermissions</con:operation>
      <con:request name="getPermissions-Admin" id="7ec1913d-6a25-497e-a66a-9ff0f69b00c4">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/drcgui/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getPermissions>
         <!--type: userClassificationTypeType - enumeration: [ALL,USER,ALL_ADMINS]-->
         <userClassificationType>ALL_ADMINS</userClassificationType>
      </v1:getPermissions>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="f668233b-2ec0-42ab-8d11-c1eeaa47d058"/>
        <con:assertion type="Schema Compliance" id="a370f08f-e29f-40d3-b94a-fcb5bd825ac3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="5094c8ad-5790-461a-bc81-5fb0b83440bf"/>
        <con:assertion type="XPath Match" id="47a13cf5-436d-4027-b778-1a1097ae996b" name="Check count of [permissions]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/ws/drcgui/v1/';
count( //ns2:getPermissionsResponse/permissions)</path>
            <content>${#TestCase#CountPerm-Admin}</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="getPermissions-User" id="febf2945-dd1e-475f-a350-97bf330a5c93">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>getPermissions</con:operation>
      <con:request name="getPermissions-User" id="7ec1913d-6a25-497e-a66a-9ff0f69b00c4">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/drcgui/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:getPermissions>
         <!--type: userClassificationTypeType - enumeration: [ALL,USER,ALL_ADMINS]-->
         <userClassificationType>USER</userClassificationType>
      </v1:getPermissions>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="f668233b-2ec0-42ab-8d11-c1eeaa47d058"/>
        <con:assertion type="Schema Compliance" id="a370f08f-e29f-40d3-b94a-fcb5bd825ac3">
          <con:configuration/>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="5094c8ad-5790-461a-bc81-5fb0b83440bf"/>
        <con:assertion type="XPath Match" id="1d6705f2-b654-434d-b76f-a2782a14be1d" name="Check count of [permissions]">
          <con:configuration>
            <path>declare namespace ns4='http://directrecharge.o2.com/ws/drcgui/v1/';
count( //ns4:getPermissionsResponse/permissions)=${#TestCase#CountPerm-All}-${#TestCase#CountPerm-Admin}</path>
            <content>true</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>Inherit From Parent</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>CountPerm-All</con:name>
      <con:value>75</con:value>
    </con:property>
    <con:property>
      <con:name>CountPerm-Admin</con:name>
      <con:value>27</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
