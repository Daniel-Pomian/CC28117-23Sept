<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="6a1d9371-35d7-433b-b009-becdee40eec5" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="GoodCase-DEV-ExecJobs-NoTasks" searchProperties="true" timeout="0" maxResults="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" zephyrTestName="" zephyrTestId="" disabled="true" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests job execution without any task to be processed.
Validate and make sure no one new entrance in table: Job_Maintain is added.</con:description>
  <con:settings>
    <con:setting id="0b157688-2fb8-4f28-acd4-6cd13a7989b2fileName">GoodCase-DEV-ExecJobs-NoTasks</con:setting>
    <con:setting id="6a1d9371-35d7-433b-b009-becdee40eec5fileName">GoodCase-DEV-ExecJobs-NoTasks</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="delay" name="Delay-ClearAllJobTasks" id="f0c5a1af-51ab-411c-b100-0dd80e3fcea4">
    <con:settings/>
    <con:config>
      <delay>1000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="_DataSource-getJobs" id="f5107125-d7ca-4c48-9fa4-2a0a50c26a6b">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.teststeps.datasource.DataSourceContainer@prepared-properties">&lt;xml-fragment/></con:setting>
    </con:settings>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="JDBC">
        <con:configuration><driver>${#Project#drc-db-driver}</driver><connstr>${#Project#drc-db-connString}</connstr><pass/><Connection>drc-db( Default environment )</Connection><query>Select SETTINGS.NAME As JobName
From SETTINGS
Where SETTINGS.NAME Like '%job.JobAction%'
Order By SETTINGS.NAME</query><fetchSize/><stored-procedure>false</stored-procedure></con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>JobName</con:property>
      <con:restartOnRun>true</con:restartOnRun>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="_DRCGUI-ExecJob" id="59db1ce0-2fb4-40ac-8541-e14740180766">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>triggerJobManager</con:operation>
      <con:request name="_DRCGUI-ExecJob" id="7e3d55e2-60ca-4b78-8ac4-2ff501eb12f8" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/common/job/v1/">
   <soapenv:Header/>
   <soapenv:Body>
      <v1:triggerJobManager>
         <jobName>${_DataSource-getJobs#JobName}</jobName>
         <repeat>true</repeat>
      </v1:triggerJobManager>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="a92ffbf7-5b12-4e8d-b9eb-9f1f7e4b22b5"/>
        <con:assertion type="Schema Compliance" id="3712e43f-1940-4655-b7c8-e5fa53342ab0" name="Schema Compliance">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="a7c67a4c-c54f-47e8-9b74-2cbb069e4a34" name="Not SOAP Fault"/>
        <con:credentials>
          <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
          <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
          <con:authType>Global HTTP Settings</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="_DataSource Loop-getJobs" id="ee95dcce-6c82-41b1-920c-3fbc5f3f6253">
    <con:settings/>
    <con:config>
      <dataSourceStep>_DataSource-getJobs</dataSourceStep>
      <targetStep>_DRCGUI-ExecJob</targetStep>
      <discardResults>true</discardResults>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="JDBC Request-getMaxID" id="f5e9118e-b429-462f-89b8-c28467b5dad7">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>drc-db</con:dbConnectionName>
      <con:driver>${#Project#drc-db-driver}</con:driver>
      <con:connectionString>${#Project#drc-db-connString}</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>SELECT MAX(ID) FROM JOB_MAINTAIN</con:query>
      <con:assertion type="JDBC Status" id="ff708cb5-c81c-41f8-899c-1ac26052eca5" name="JDBC Status"/>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay-ExecAllJob" id="af3c7edf-ade4-4952-9e6c-7c198d55cf64">
    <con:settings/>
    <con:config>
      <delay>1000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="DataSource-getJobs" id="d56000b6-ca2a-4bc1-87c5-c37d64d8519c">
    <con:settings>
      <con:setting id="com.eviware.soapui.impl.wsdl.teststeps.datasource.DataSourceContainer@prepared-properties">&lt;xml-fragment/></con:setting>
    </con:settings>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="JDBC">
        <con:configuration><driver>${#Project#drc-db-driver}</driver><connstr>${#Project#drc-db-connString}</connstr><pass/><Connection>drc-db( Default environment )</Connection><query>Select SETTINGS.NAME As JobName
From SETTINGS
Where SETTINGS.NAME Like '%job.JobAction%'
Order By SETTINGS.NAME</query><fetchSize/><stored-procedure>false</stored-procedure></con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>JobName</con:property>
      <con:restartOnRun>true</con:restartOnRun>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="DRCGUI-ExecJob" id="9b506556-e5bf-4349-8afc-acd32683deda">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DrcGuiSoapBinding</con:interface>
      <con:operation>triggerJobManager</con:operation>
      <con:request name="DRCGUI-ExecJob" id="7e3d55e2-60ca-4b78-8ac4-2ff501eb12f8" defaultOutgoingWss="" defaultIncomingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-GUIService-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:type="http://directrecharge.o2.com/ws/drcgui/v1/" xmlns:v1="http://directrecharge.o2.com/ws/common/job/v1/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <v1:triggerJobManager>\r
         <jobName>${_DataSource-getJobs#JobName}</jobName>\r
         <repeat>true</repeat>\r
      </v1:triggerJobManager>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="a92ffbf7-5b12-4e8d-b9eb-9f1f7e4b22b5"/>
        <con:assertion type="Schema Compliance" id="3712e43f-1940-4655-b7c8-e5fa53342ab0" name="Schema Compliance">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="a7c67a4c-c54f-47e8-9b74-2cbb069e4a34" name="Not SOAP Fault"/>
        <con:credentials>
          <con:selectedAuthProfile>Basic</con:selectedAuthProfile>
          <con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes>
          <con:authType>Global HTTP Settings</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8bb64a40-b6a3-45c2-a26b-7f6c797dbea5">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>Basic</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="DataSource Loop-getJobs" id="bfebfcab-a128-4775-b560-c7eb9a37369b">
    <con:settings/>
    <con:config>
      <dataSourceStep>DataSource-getJobs</dataSourceStep>
      <targetStep>DRCGUI-ExecJob</targetStep>
      <discardResults>true</discardResults>
    </con:config>
  </con:testStep>
  <con:testStep type="jdbc" name="JDBC Request-getMaxID-again" id="b9a2ac82-e213-4198-a9c7-56ad306cd898">
    <con:settings>
      <con:setting id="prettyPrintResponse">true</con:setting>
    </con:settings>
    <con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dbConnectionName>drc-db</con:dbConnectionName>
      <con:driver>${#Project#drc-db-driver}</con:driver>
      <con:connectionString>${#Project#drc-db-connString}</con:connectionString>
      <con:password/>
      <con:connectionProperties/>
      <con:query>SELECT MAX(ID) FROM JOB_MAINTAIN</con:query>
      <con:assertion type="JDBC Status" id="dac1b55d-6377-44c9-a723-886a56b23402" name="JDBC Status"/>
      <con:assertion type="XPath Match" id="4e826b89-d66c-43d0-bcc7-8d39cab96d7d" name="Match content of [MAXID]">
        <con:configuration>
          <path>//Results[1]/ResultSet[1]/Row[1]/MAXID[1]/text()</path>
          <content>${JDBC Request-getMaxID#ResponseAsXml#//Results[1]/ResultSet[1]/Row[1]/MAXID[1]}</content>
          <allowWildcards>false</allowWildcards>
          <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
          <ignoreComments>true</ignoreComments>
        </con:configuration>
      </con:assertion>
      <con:properties/>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Run TestCase_EXECJobs-Archiving" id="4655126f-fa6a-453a-88fd-77b3c46e5fd5">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" ignoreEmptyProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>f38044ff-88ad-431e-be7a-2a3db8cf728d</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>taskCount-Create-Transaction</con:name>
          <con:value>13</con:value>
        </con:property>
        <con:property>
          <con:name>taskCount-Process-Transaction</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>taskCount-Create-SepaFile</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>taskCount-Process-SepaFile</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>taskCount-Create-FileUpload</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>taskCount-Process-FileUpload</con:name>
          <con:value>0</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>taskCount-Create-Transaction</con:entry>
        <con:entry>taskCount-Process-Transaction</con:entry>
        <con:entry>taskCount-Create-SepaFile</con:entry>
        <con:entry>taskCount-Process-SepaFile</con:entry>
        <con:entry>taskCount-Create-FileUpload</con:entry>
        <con:entry>taskCount-Process-FileUpload</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>21c44763-d0c1-4310-a6d1-f1376840cb36</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>40a32fb6-581f-46f8-b1ac-a92e4babf2ad</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>4a1fff01-e740-4159-ae07-6d4f0ebf0969</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ee5d70b9-6f87-4f5c-8593-88d124b4ca74</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>80ce775b-99ca-4f1c-9b90-5e9f727f96a1</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>fd7258b3-5887-4a98-9aad-90ac8f766ece</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>7e390afe-4585-4ec8-8d6e-b46b646eb42a</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>da1ca270-f69a-4eaa-90d5-483cbdd43b59</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>cc97df27-2d9f-4e4f-ad85-b1075c7f4aeb</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>ede4beb1-0217-45ce-bba7-211b758b2c5e</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>