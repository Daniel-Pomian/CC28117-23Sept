<?xml version="1.0" encoding="UTF-8"?>
<con:restMockAction name="/gps/v1/creditcards/{aliasId}/deregister" method="PATCH" resourcePath="/gps/v1/creditcards/{aliasId}/deregister" id="f4c77554-2e37-4131-981e-457f30284e90" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="f4c77554-2e37-4131-981e-457f30284e90fileName">%2Fgps%2Fv1%2Fcreditcards%2F%7BaliasId%7D%2Fderegister</con:setting>
  </con:settings>
  <con:defaultResponse>Response-Default</con:defaultResponse>
  <con:dispatchStyle>SCRIPT</con:dispatchStyle>
  <con:dispatchConfig xsi:type="con:MockOperationQueryMatchDispatch" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/>
  <con:dispatchPath>/*
  * This script select response based on id in url
  * Date: 19.04.2017
  * Autor: Michael Gordon
 */
 
 String sID = context.expand( '${#MockService#aliasId}' )
 if(sID.startsWith('400_')) 
 	return 'Response-400=HTTP-Status'
 else if (sID.startsWith('402_'))
 	return 'Response-402=HTTP-Status'
 else if (sID.startsWith('500_'))
 	return 'Response-500=HTTP-Status'
 else if (sID.startsWith('502_'))
 	return 'Response-502=HTTP-Status'
 else if (sID.startsWith('503_'))
 	return 'Response-503=HTTP-Status'
 else if (sID.startsWith('401_'))
 	return 'Response-401=HTTP-Status-EmptyBody'
 else if (sID.startsWith('403_'))
 	return 'Response-403=HTTP-Status-EmptyBody'
 else if (sID.startsWith('406_'))
 	return 'Response-406=HTTP-Status-EmptyBody'
 else if (sID.startsWith('415_'))
 	return 'Response-415=HTTP-Status-EmptyBody' 
 else
 	return 'Response-Default'</con:dispatchPath>
  <con:dispatchXPath/>
  <con:parameterDispatcherRuleContainer/>
  <con:routeScript/>
  <con:response name="Response-Default" id="914227f2-9a24-45a3-8a65-7dd4b5b6c8ea" httpResponseStatus="200" mediaType="application/xml" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<creditCard targetNamespace="http://gps.telefonica.com/v1/types">
   <aliasId>${#MockService#aliasId}</aliasId>
   <paymentProvider>Mastercard</paymentProvider>
   <status>DEREGISTERED</status>
   <creditCardBrandName>MasterCard</creditCardBrandName>
   <maskedNumber>1234 5678 9012 3456</maskedNumber>
   <expiryYear>2020</expiryYear>
   <expiryMonth>1</expiryMonth>
   <registrationDate>${#MockService#Default-regDate}</registrationDate>
   <deregistrationDate>${#MockService#Default-caDate}</deregistrationDate>
   <cardHolderName>cardHolderName contains max. allowed signs=50 5050</cardHolderName>
   <countryCode>${#MockService#Default-countryCode}</countryCode>
</creditCard>]]></con:responseContent>
  </con:response>
  <con:response name="Response-400=HTTP-Status" id="95ab2c0c-1fc4-47b8-bc3e-3b683aebb430" httpResponseStatus="400" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<errorResponse>
  <errorCode>VALIDATION_FAILED</errorCode>
  <errorMessage>${#MockService#Default-errorDescription}</errorMessage>
  <path>${#MockService#currentURL}</path>
  <timestamp>${#Project#DateTime_Current_Offset}</timestamp>
</errorResponse>]]></con:responseContent>
  </con:response>
  <con:response name="Response-402=HTTP-Status" id="e4c9356a-4ee7-4c40-9ad8-5b3f8c8af370" httpResponseStatus="402" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<errorResponse>
  <errorCode>TRANSACTION_FAILED</errorCode>
  <pspErrorCode>CARD_CHECK_FAILED</pspErrorCode>
  <errorMessage>${#MockService#Default-errorDescription}</errorMessage>
  <path>${#MockService#currentURL}</path>
  <timestamp>${#Project#DateTime_Current_Offset}</timestamp>
</errorResponse>]]></con:responseContent>
  </con:response>
  <con:response name="Response-500=HTTP-Status" id="ee48b6d7-c94f-40a8-b85d-71af62849c17" httpResponseStatus="500" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<errorResponse>
  <errorCode>GPS_INTERNAL_ERROR</errorCode>
  <errorMessage>${#MockService#Default-errorDescription}</errorMessage>
  <path>${#MockService#currentURL}</path>
  <timestamp>${#Project#DateTime_Current_Offset}</timestamp>
</errorResponse>]]></con:responseContent>
  </con:response>
  <con:response name="Response-502=HTTP-Status" id="9a115744-4ecb-4d8e-9675-344625cd3f64" httpResponseStatus="502" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<errorResponse>
  <errorCode>PSP_ERROR</errorCode>
  <pspErrorCode>INTERNAL_ERROR</pspErrorCode>
  <errorMessage>${#MockService#Default-errorDescription}</errorMessage>
  <path>${#MockService#currentURL}</path>
  <timestamp>${#Project#DateTime_Current_Offset}</timestamp>
</errorResponse>]]></con:responseContent>
  </con:response>
  <con:response name="Response-503=HTTP-Status" id="68049f8a-ce4c-4d9a-8e77-2773bd40b8c9" httpResponseStatus="503" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<errorResponse>
  <errorCode>PSP_ERROR</errorCode>
  <errorMessage>${#MockService#Default-errorDescription}</errorMessage>
  <path>${#MockService#currentURL}</path>
  <timestamp>${#Project#DateTime_Current_Offset}</timestamp>
</errorResponse>]]></con:responseContent>
  </con:response>
  <con:response name="Response-401=HTTP-Status-EmptyBody" id="feacccf5-f096-40bb-8018-33e56216c863" httpResponseStatus="401" dataSource="">
    <con:settings/>
    <con:responseContent/>
  </con:response>
  <con:response name="Response-403=HTTP-Status-EmptyBody" id="287766c9-5708-4a95-8d1f-aebcf5f80003" httpResponseStatus="403" dataSource="">
    <con:settings/>
    <con:responseContent/>
  </con:response>
  <con:response name="Response-406=HTTP-Status-EmptyBody" id="dea3bc05-3aae-45e9-b220-a3a92ed06b47" httpResponseStatus="406" dataSource="">
    <con:settings/>
    <con:responseContent/>
  </con:response>
  <con:response name="Response-415=HTTP-Status-EmptyBody" id="a19d7a54-cf98-4639-a7a5-196b15434cc4" httpResponseStatus="415" dataSource="">
    <con:settings/>
    <con:responseContent/>
  </con:response>
</con:restMockAction>
