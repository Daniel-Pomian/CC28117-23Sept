<?xml version="1.0" encoding="UTF-8"?>
<con:mockOperation name="queryBalances" id="731c3a3e-5e52-43f7-8687-37c80421e17d" interface="BalanceManagementServiceSOAPBinding_v1_0" operation="queryBalances" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="731c3a3e-5e52-43f7-8687-37c80421e17dfileName">queryBalances</con:setting>
  </con:settings>
  <con:defaultResponse>Response-Default</con:defaultResponse>
  <con:dispatchStyle>QUERY_MATCH</con:dispatchStyle>
  <con:dispatchConfig xsi:type="con:MockOperationQueryMatchDispatch" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <con:query>
      <con:name>response-serviceException</con:name>
      <con:query>declare namespace typ='http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/balanceManagement/v1/types';
declare namespace typ1='http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/v1/types';
string-length(//typ:queryBalances[1]/typ1:subscriberId[1]/typ1:e164Number[1])&lt;1
or
string-length(//typ:queryBalances[1]/typ1:subscriberId[1]/typ1:e164Number[1])>15</con:query>
      <con:match>true</con:match>
      <con:response>Response-soapFault-ServiceException</con:response>
    </con:query>
  </con:dispatchConfig>
  <con:dispatchXPath/>
  <con:routeScript/>
  <con:response name="Response-Default" id="f46ef805-38db-457e-9dea-74ba3e1fac5d" httpResponseStatus="200" encoding="UTF-8" dataSource="" compressedBodyContent="aced00057372002f636f6d2e657669776172652e736f617075692e696d706c2e737570706f72742e436f6d7072657373656456616c7565000b8b02c748eeab0200025a000a636f6d707265737365645b0004646174617400025b4278700070">
    <con:settings/>
    <con:responseContent><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:add="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:typ="http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/balanceManagement/v1/types" xmlns:typ1="http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/v1/types">
   <soapenv:Header>
      <add:MessageID>urn:uuid:${#Project#GUID}</add:MessageID>
   </soapenv:Header>   
   <soapenv:Body>
      <ns4:queryBalancesResponse xmlns="http://www.w3.org/2000/09/xmldsig#" xmlns:ns2="http://www.telefonica.com/schemas/UNICA/SOAP/common/v2" xmlns:ns3="http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/v1/types" xmlns:ns4="http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/balanceManagement/v1/types" xmlns:ns5="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns6="http://schemas.xmlsoap.org/ws/2002/04/secext">
         <ns3:balanceActivityInfo>
            <ns3:balance exponent="${#MockService#DEFAULT-exponent}">${#MockService#DEFAULT-balance}</ns3:balance>
            <ns3:walletInfoList>
               <ns3:walletInfo>
                  <ns3:walletId>${#MockService#DEFAULT-walletId}</ns3:walletId>
                  <ns3:balance exponent="${#MockService#DEFAULT-exponent}">${#MockService#DEFAULT-balance}</ns3:balance>
                  <ns3:expirationDate>${#Project#Date_Future_Offset}</ns3:expirationDate>
                  <ns3:status>AC</ns3:status>
                  <ns3:sharedFlag>yes</ns3:sharedFlag>
               </ns3:walletInfo>
            </ns3:walletInfoList>
            <ns3:negativeBalance exponent="${#MockService#DEFAULT-exponent}">0</ns3:negativeBalance>
            <ns3:negativeBalanceInfoList>
               <ns3:negativeBalanceInfo>
                  <ns3:negativeBalanceId>1</ns3:negativeBalanceId>
                  <ns3:balance exponent="${#MockService#DEFAULT-exponent}">0</ns3:balance>
               </ns3:negativeBalanceInfo>
            </ns3:negativeBalanceInfoList>
         </ns3:balanceActivityInfo>
      </ns4:queryBalancesResponse>
   </soapenv:Body>
</soapenv:Envelope>]]></con:responseContent>
    <con:wsaConfig mustUnderstand="NONE" version="200508" action="queryBalances"/>
  </con:response>
  <con:response name="Response-soapFault-ServiceException" id="044a7ea9-7ce9-415a-a7bf-ab5351cdf354" httpResponseStatus="500" encoding="UTF-8" dataSource="">
    <con:settings/>
    <con:responseContent><![CDATA[<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Server</faultcode>
         <faultstring>${#MockService#faultString}</faultstring>
         <detail>
            <ns2:serverException xmlns="http://www.w3.org/2000/09/xmldsig#" xmlns:ns2="http://www.telefonica.com/schemas/UNICA/SOAP/common/v2" xmlns:ns3="http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/v1/types" xmlns:ns4="http://www.telefonica.com/schemas/UNICA/SOAP/altamiraProvision/balanceManagement/v1/types" xmlns:ns5="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:ns6="http://schemas.xmlsoap.org/ws/2002/04/secext">
               <ns2:exceptionCategory>SVR</ns2:exceptionCategory>
               <ns2:exceptionId>${#MockService#DEFAULT-ErrorCode}</ns2:exceptionId>
               <ns2:text>${#MockService#DEFAULT-ErrorText}</ns2:text>
               <ns2:exceptionPersistence>${#MockService#DEFAULT-ErrorType}</ns2:exceptionPersistence>
            </ns2:serverException>
         </detail>
      </soap:Fault>
   </soap:Body>
</soap:Envelope>]]></con:responseContent>
    <con:wsaConfig mustUnderstand="NONE" version="200508" action="queryBalances"/>
  </con:response>
</con:mockOperation>
