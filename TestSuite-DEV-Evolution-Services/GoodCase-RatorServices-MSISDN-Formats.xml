<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="bdbd5ca6-64ec-4a4b-86e8-3806fe9cba56" discardOkResults="true" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="GoodCase-RatorServices-MSISDN-Formats" searchProperties="true" timeout="0" maxResults="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" xmlns:con="http://eviware.com/soapui/config">
  <con:description>Tests services from rator with different msisdn formats</con:description>
  <con:settings>
    <con:setting id="bdbd5ca6-64ec-4a4b-86e8-3806fe9cba56fileName">GoodCase-RatorServices-MSISDN-Formats</con:setting>
  </con:settings>
  <con:savedRecentRuns>1</con:savedRecentRuns>
  <con:testStep type="datasource" name="DataSource-MSISDNs" id="e716e5a3-ae65-4591-898c-63e0c0d203d1">
    <con:settings/>
    <con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:dataSource type="Grid">
        <con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">49176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">49176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0049176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0049176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">+49176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">+49176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0176123456&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">0176123456789&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><recognizeAsPlainText>true</recognizeAsPlainText></con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>msisdn</con:property>
      <con:startRow/>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>true</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="Property Transfer_MSISDN" id="a29e45b6-17d6-409c-ba04-02c9d96689fa">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>msisdn</con:name>
        <con:sourceType>msisdn</con:sourceType>
        <con:sourceStep>DataSource-MSISDNs</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>MSISDN</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="75ee6425-ff79-4995-bd55-1984c86bfca5" name="topupSynchronous">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DirectRechargeEvolutionServiceForTgpsV3SoapBinding</con:interface>
      <con:operation>topupSynchronous</con:operation>
      <con:request name="topupSynchronous" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="d2a27eeb-3960-4067-a118-7a3f86a9dcd6">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-DirectRechargeEvolutionServiceForTgpsV3-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v3="http://directrecharge.o2.com/ws/directrechargeevolutionservice/topupsynchronous/tgps/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <v3:topupSynchronous>
         <topupDto>
            <amount>${#TestSuite#Amount-Default}</amount>
            <balanceType>${#TestSuite#balanceType}</balanceType>
            <msisdn>${#TestCase#MSISDN}</msisdn>
            <referenceId>${#Project#GUID_Moved-}</referenceId>
         </topupDto>
      </v3:topupSynchronous>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="931a0534-f313-4c68-9943-50e275e5951f" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="eb4ff69d-9e04-4189-a6fc-cd382f38d7fd" name="Schema Compliance">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="16ea8199-7c5b-412b-866a-9adff9dfe376" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="da7857d3-8d06-4dff-ac84-e2f34e3de0e6" name="Match content of [msisdn]">
          <con:configuration>
            <path>declare namespace ns2='http://directrecharge.o2.com/ws/directrechargeevolutionservice/topupsynchronous/tgps/v3/';
//ns2:topupSynchronousResponse[1]/topupResultDto[1]/msisdn[1]/text()</path>
            <content>491*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://directrecharge.o2.com/ws/directrechargeevolutionservice/DirectRechargeEvolutionServiceForTgpsV3PortType/topupSynchronous"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="8448f5e8-bf28-4cab-a636-b89959c7af28" name="queryBalance">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DirectRechargeEvolutionServiceForTgpsV3SoapBinding</con:interface>
      <con:operation>queryBalance</con:operation>
      <con:request name="queryBalance" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="e3058fa6-bb7c-47a8-a0f9-7f98fc6bff66">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-DirectRechargeEvolutionServiceForTgpsV3-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v3="http://directrecharge.o2.com/ws/directrechargeevolutionservice/querybalance/tgps/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <v3:queryBalance>
         <queryBalanceDto>
            <!--type: string-->
            <msisdn>${#TestCase#MSISDN}</msisdn>
         </queryBalanceDto>
      </v3:queryBalance>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="c48ae44c-fc7f-4f1e-9248-98a5168b6321" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="8ce96bb7-589e-440f-ae1c-99615c1fabdf" name="Schema Compliance">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="89b8b3b6-e1cb-43d2-abc6-9b766b0390d3" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="69758bc9-2aab-413a-91d3-14c26bbfd385" name="Match content of [msisdn]">
          <con:configuration>
            <path>declare namespace ns5='http://directrecharge.o2.com/ws/directrechargeevolutionservice/querybalance/tgps/v3/';
//ns5:queryBalanceResponse[1]/queryBalanceResultDto[1]/msisdn[1]/text()</path>
            <content>491*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://directrecharge.o2.com/ws/directrechargeevolutionservice/DirectRechargeEvolutionServiceForTgpsV3PortType/queryBalance"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" id="ed829b49-529d-4cee-bbcb-2c3d795cb1a3" name="deductBalance">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>DirectRechargeEvolutionServiceForTgpsV3SoapBinding</con:interface>
      <con:operation>deductBalance</con:operation>
      <con:request name="deductBalance" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="" id="9a3f8b3b-6a15-4f8c-b13f-bae71428ff2a">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>${#Project#drc-DirectRechargeEvolutionServiceForTgpsV3-URL}</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:v3="http://directrecharge.o2.com/ws/directrechargeevolutionservice/deductbalance/tgps/v3/">
   <soapenv:Header/>
   <soapenv:Body>
      <v3:deductBalance>
         <deductBalanceDto>
            <allOrNothingFlag/>
            <amount>${#TestSuite#Balance-OCS-Default}</amount>
            <msisdn>${#Project#MSISDN-chargeCustomer-OK}</msisdn>
            <referenceId>${#Project#GUID_Moved-}</referenceId>
            <balanceType>${#TestSuite#balanceType}</balanceType>
         </deductBalanceDto>
      </v3:deductBalance>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="70e9a5a7-ec98-49cc-b1e7-a90bd4c71979" name="SOAP Response"/>
        <con:assertion type="Schema Compliance" id="30c11496-24af-4930-9037-1b55417baf10" name="Schema Compliance">
          <con:configuration>
            <definition/>
          </con:configuration>
        </con:assertion>
        <con:assertion type="SOAP Fault Assertion" id="d4eca889-29ec-462b-a119-323326cb387a" name="Not SOAP Fault"/>
        <con:assertion type="XPath Match" id="f6bffdcf-5647-47b0-a95d-73f0f37954e7" name="Match content of [msisdn]">
          <con:configuration>
            <path>declare namespace ns6='http://directrecharge.o2.com/ws/directrechargeevolutionservice/deductbalance/tgps/v3/';
//ns6:deductBalanceResponse[1]/deductBalanceResultDto[1]/msisdn[1]/text()</path>
            <content>491*</content>
            <allowWildcards>true</allowWildcards>
            <ignoreNamspaceDifferences>true</ignoreNamspaceDifferences>
            <ignoreComments>true</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508" action="http://directrecharge.o2.com/ws/directrechargeevolutionservice/DirectRechargeEvolutionServiceForTgpsV3PortType/deductBalance"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="ff1a32e2-ce69-4c5a-923a-710f216e83c9">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="96753c0f-e806-4b6f-b398-e4e8dbc7bce1">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="d4fb7d9b-be04-4609-bf0a-ed3a22d5075f">
            <con:authProfile>No Authorization</con:authProfile>
          </con:entry>
          <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="DataSource Loop" id="7d5443b5-2ee6-4b2d-8b5f-a1ed4bc11795">
    <con:settings/>
    <con:config>
      <dataSourceStep>DataSource-MSISDNs</dataSourceStep>
      <targetStep>Property Transfer_MSISDN</targetStep>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>MSISDN</con:name>
      <con:value>0176123456789</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>510bbaf8-9df8-46d5-bf03-202df7eccae1</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>2d4ce9a2-9e6b-4105-aad4-ff974522c0d8</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>e716e5a3-ae65-4591-898c-63e0c0d203d1</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:breakPoints>
    <con:testStepId>a29e45b6-17d6-409c-ba04-02c9d96689fa</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
  <con:environmentSpec>
    <con:entry environmentId="e385afea-1153-4d90-83b9-3b49a724f0ea">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>