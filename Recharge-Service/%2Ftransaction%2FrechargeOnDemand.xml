<?xml version="1.0" encoding="UTF-8"?>
<con:resource name="/transaction/rechargeOnDemand" path="/transaction/rechargeOnDemand" id="ee713446-e40b-4c58-9a76-7dc3df9f927b" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="f4472a93-64bb-4bcf-ac5b-1219d889c7dbfileName">%2Ftransaction%2FrechargeOnDemand</con:setting>
    <con:setting id="ee713446-e40b-4c58-9a76-7dc3df9f927bfileName">%2Ftransaction%2FrechargeOnDemand</con:setting>
  </con:settings>
  <con:parameters/>
  <con:method name="rechargeOnDemand" id="66887195-832b-47c3-87a4-4a82f1273d07" method="POST">
    <con:description>Charge customer balance account on demand or by SMS.</con:description>
    <con:settings/>
    <con:parameters>
      <con:parameter required="true">
        <con:name>X-O2DRC-ClientId</con:name>
        <con:value/>
        <con:style>HEADER</con:style>
        <con:default/>
      </con:parameter>
      <con:parameter required="true">
        <con:name>X-O2DRC-ActivityId</con:name>
        <con:value/>
        <con:style>HEADER</con:style>
        <con:default/>
      </con:parameter>
    </con:parameters>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>200</con:status>
      <con:params/>
      <con:description>Successful operation</con:description>
      <con:sampleContent>{
  "isDuplicate" : true,
  "correlationId" : "123456789",
  "mainBalance" : 0,
  "currency" : "EUR"
}</con:sampleContent>
    </con:representation>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>400</con:status>
      <con:params/>
      <con:description>Invalid request - Possible error codes
  * INVALID_DATA</con:description>
      <con:sampleContent>{
  "retryPossible" : true,
  "errorCode" : "INVALID_DATA",
  "originator" : "DRC",
  "message" : "string",
  "originatorMessage" : "string"
}</con:sampleContent>
    </con:representation>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>403</con:status>
      <con:params/>
      <con:description>Forbidden - Possible error codes
  * PAYMENT_USECASE_NOT_ALLOWED
  * SERVICE_PROVIDER_NOT_ALLOWED
  * PARTNER_NOT_ALLOWED
  * INITIAL_RETENTION</con:description>
      <con:sampleContent>{
  "retryPossible" : true,
  "errorCode" : "INVALID_DATA",
  "originator" : "DRC",
  "message" : "string",
  "originatorMessage" : "string"
}</con:sampleContent>
    </con:representation>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>406</con:status>
      <con:params/>
      <con:description>Not Acceptable - The information about limit parameter that has been exceeded. If more as one parameter exceeded the only one with the longest reset date will be delivered, i.e. if a daily and a monthly limit exceeded the monthly one will be delivered.</con:description>
      <con:sampleContent>{
  "limitResetDate" : "2021-07-13T09:53:38+02:00",
  "validationCycle" : "DAILY_FIX_START_00",
  "monetaryLimitInfo" : {
    "monetaryLimitParameter" : {
      "value" : 0,
      "currency" : "EUR"
    },
    "remainingLimitAmount" : 0,
    "currency" : "EUR"
  }
}</con:sampleContent>
    </con:representation>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>412</con:status>
      <con:params/>
      <con:description>Precondition failed - Possible error codes
  * PAYMENT_USECASE_UNKNOWN
  * UNKNOWN_BRAND
  * BRAND_NOT_MATCH
  * TENANT_NOT_MATCH
  * MSISDN_UNKNOWN
  * MSISDN_INACTIVE
  * UNKNOWN_SUBSCRIBER
  * INVALID_SUBSCRIBER
  * UNKNOWN_PAYMENT_ACCOUNT
  * INVALID_PAYMENT_ACCOUNT
  * ALREADY_IN_PROGRESS
  * MAX_CREDIT_BALANCE
  * TOO_MANY_TRANSIENT_ERRORS</con:description>
      <con:sampleContent>{
  "retryPossible" : true,
  "errorCode" : "INVALID_DATA",
  "originator" : "DRC",
  "message" : "string",
  "originatorMessage" : "string"
}</con:sampleContent>
    </con:representation>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>500</con:status>
      <con:params/>
      <con:description>Internal Server Error - Possible error codes
  * DATABASE_ERROR
  * INTERNAL_ERROR</con:description>
      <con:sampleContent>{
  "retryPossible" : true,
  "errorCode" : "INVALID_DATA",
  "originator" : "DRC",
  "message" : "string",
  "originatorMessage" : "string"
}</con:sampleContent>
    </con:representation>
    <con:representation type="RESPONSE">
      <con:mediaType>application/json</con:mediaType>
      <con:status>502</con:status>
      <con:params/>
      <con:description>Bad Gateway - Possible error codes
  * UPSTREAM_SERVER_SOCKET_TIMEOUT
  * UPSTREAM_SERVER_CONNECTION_REFUSED
  * TRANSIENT_ERROR_FROM_UPSTREAM_SERVER
  * PERMANENT_ERROR_FROM_UPSTREAM_SERVER</con:description>
      <con:sampleContent>{
  "retryPossible" : true,
  "errorCode" : "INVALID_DATA",
  "originator" : "DRC",
  "message" : "string",
  "originatorMessage" : "string"
}</con:sampleContent>
    </con:representation>
    <con:representation type="REQUEST">
      <con:mediaType>application/json</con:mediaType>
      <con:params/>
      <con:sampleContent>{
  "msisdn" : "4917623900145",
  "paymentMethodReference" : "string",
  "amount" : 0,
  "currency" : "EUR",
  "paymentDate" : "2021-07-13T09:53:38+02:00",
  "paymentUseCase" : "ON_DEMAND"
}</con:sampleContent>
    </con:representation>
    <con:request name="Request 1" id="71defcec-8f82-495b-8234-372f2e5c106b" mediaType="application/json" postQueryString="false">
      <con:settings>
        <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
      </con:settings>
      <con:endpoint>http://localhost:18080/drc/ws/recharge/v2</con:endpoint>
      <con:request>{\r
  "msisdn" : "${#Project#MSISDN_OK}",\r
  "paymentMethodReference" : "${#Project#Random8}",\r
  "amount" : 10,\r
  "currency" : "EUR",\r
  "paymentDate" : "${#Project#DT_Current_Offset}"
}</con:request>
      <con:originalUri>http://mucsgdp08.sg.de.pri.o2.com/drc/ws/recharge/v1/transaction/rechargeOnDemandSMS</con:originalUri>
      <con:credentials>
        <con:selectedAuthProfile>mfe-drc-basic</con:selectedAuthProfile>
        <con:authType>No Authorization</con:authType>
      </con:credentials>
      <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
      <con:parameters>
        <con:entry key="X-O2DRC-ClientId" value="U-621"/>
        <con:entry key="X-O2DRC-ActivityId" value="${#Project#GUID}"/>
      </con:parameters>
      <con:environmentSpec>
        <con:entry environmentId="c0283aa8-a2f8-42fb-b94d-307e10c6901f">
          <con:authProfile>Inherit From Parent</con:authProfile>
        </con:entry>
      </con:environmentSpec>
    </con:request>
    <con:environmentSpec>
      <con:entry environmentId="c0283aa8-a2f8-42fb-b94d-307e10c6901f">
        <con:authProfile>Inherit From Parent</con:authProfile>
      </con:entry>
    </con:environmentSpec>
  </con:method>
  <con:environmentSpec>
    <con:entry environmentId="c0283aa8-a2f8-42fb-b94d-307e10c6901f">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:resource>
